"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("fs"),t=require("vite");function i(t,i,n){t.data=function(e,t){const i=`window.${e.globalName}`;return`${i}=${JSON.stringify(t,void 0,2)};\n  Object.freeze(${i});\n  Object.defineProperty(window, "${e.globalName}", {\n    configurable: false,\n    writable: false,\n  });`}(t,n)+(t.data?t.data:""),t.file=i+t.file,e.writeFile(t.file,t.data,t.options||{},(e=>{if(e)return t.reject&&t.reject(e),void console.error("settings creates fail,you maybe need rebuild"+e);t.resolve&&t.resolve(e),console.info("settings create success!!!")}))}function n(e,n){let o,r;return{apply:"build",name:"write-env-in-dist",configResolved(e){o=e},config:(...e)=>{r=e[1].mode},closeBundle(){const n=t.loadEnv(r,process.cwd());let s=`${o.root}/${o.build.outDir}/`;!function(e,t,n){Array.isArray(e)?e.forEach((e=>{i(e,t,Object.assign({},n,e.config))})):i(e,t,Object.assign({},n,e.config))}(e,s,n)}}}exports.default=n,exports.generateConfigIntoDist=n;
