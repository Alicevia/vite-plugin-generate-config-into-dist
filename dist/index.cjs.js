"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("fs"),o=require("vite");function t(o,t,n){o.data=function(e,o){const t=`window.${e.globalName}`;return`${t}=${JSON.stringify(o,void 0,2)};\n  Object.freeze(${t});\n  Object.defineProperty(window, "${e.globalName}", {\n    configurable: false,\n    writable: false,\n  });`}(o,n)+(o.data?o.data:""),o.file=t+o.file,e.writeFile(o.file,o.data,o.options||{},(e=>{if(e)return o.reject&&o.reject(e),void console.error("settings创建失败,你可能需要重新打包"+e);o.resolve&&o.resolve(e),console.info("settings创建成功")}))}function n(e,n){let i,r;return{apply:"build",name:"write-env-in-dist",configResolved(e){i=e},config:(...e)=>{r=e[1].mode},closeBundle(){console.log(n,"sdf");const s=o.loadEnv(r,process.cwd());let l=`${i.root}/${i.build.outDir}/`;!function(e,o,n){Array.isArray(e)?e.forEach((e=>{t(e,o,Object.assign({},n,e.config))})):t(e,o,Object.assign({},n,e.config))}(e,l,s)}}}exports.default=n,exports.generateConfigIntoDist=n;
